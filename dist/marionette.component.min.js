/**
 * Marionette.Component - Create and manage reusable components in Marionette.js
 * @version v0.0.1
 * @copyright (c) 2014 Jeremy Fairbank
 * @link https://github.com/jfairbank/marionette.component
 * @license ISC
 */
!function(e,t){"function"==typeof define&&define.amd?define(["underscore","backbone.marionette"],t):"object"==typeof exports?module.exports=t(require("underscore"),require("backbone.marionette")):e.Marionette.Component=t(e._,e.Marionette)}(this,function(e,t){return t.Component=t.Object.extend({constructor:function(e){e=e||{},this.model=e.model,this.collection=e.collection,t.Object.prototype.constructor.apply(this,arguments)},showIn:function(e){if(this._isShown)throw new Error("This component is already shown in a region.");if(!e)throw new Error("Please supply a region to show inside.");this.region=e,this.triggerMethod("before:show"),this._showView(),this._isShown=!0,this.triggerMethod("show")},destroy:function(){this._isDestroyed||(this.triggerMethod("before:destroy"),this._destroyViewThroughRegion(),this._removeReferences(),this.triggerMethod("destroy"),this.stopListening(),this._isDestroyed=!0)},_showView:function(){var t=this.view=this._getView();this._initializeViewEvents(),this.listenTo(t,"show",e.partial(this.triggerMethod,"show:view")),this.triggerMethod("before:show:view"),this.region.show(t),this.listenToOnce(this.region,"empty",this.destroy)},_getView:function(){var e=this.viewClass;if(!e)throw new Error("You must specify a viewClass for your component.");return new e({model:this.model,collection:this.collection})},_initializeViewEvents:function(){this.viewEvents&&this.bindEntityEvents(this.view,this.viewEvents)},_destroyViewThroughRegion:function(){var e=this.region;e&&this.view&&(this.stopListening(e),e.empty())},_removeReferences:function(){delete this.model,delete this.collection,delete this.region,delete this.view}}),t.Component});